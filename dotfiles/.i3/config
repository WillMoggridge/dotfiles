####################
# Please see http://i3wm.org/docs/userguide.html for a complete reference!
####################

# Mod1 = Alt key, Mod4 = Super / Windows key
set $mod Mod4
set $alt Mod1

bar {
    font pango:roboto bold 10
    position top
    status_command i3status --config ~/.i3/i3status.conf
    #status_command ~/.i3/conky
    tray_output primary
}

focus_follows_mouse no
font pango:roboto normal 8

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Reload the configuration file
bindsym $mod+Shift+c          reload

# Restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r          restart

# System functions! (lock, lougout, etc)
bindsym $mod+Pause            mode "$system_functions"
bindsym $mod+Escape           mode "$system_functions"


######
###### Launchers and command input
######

# i3 command input
bindsym $mod+period           exec --no-startup-id i3-input

# dmenu and i3-dmenu-desktop (.desktop files) program launchers
bindsym $mod+d                exec dmenu_run
bindsym $mod+Shift+d          exec --no-startup-id i3-dmenu-desktop


######
###### Other
######

# Volume!
bindsym XF86AudioRaiseVolume  exec --no-startup-id pactl set-sink-volume 0 -- +10%
bindsym XF86AudioLowerVolume  exec --no-startup-id pactl set-sink-volume 0 -- -10%

# Quick fix resolution shortcut for laptop to remove later
bindsym $mod+$alt+equal       exec "xrandr --output eDP1 --mode 2560x1440"
bindsym $mod+$alt+minus       exec "xrandr --output eDP1 --mode 1920x1080"



####################
#################### Navigation / Change focus
####################

# vim keys
bindsym $mod+j                focus left
bindsym $mod+k                focus down
bindsym $mod+l                focus up
bindsym $mod+semicolon        focus right

# Arrow keys
bindsym $mod+Left             focus left
bindsym $mod+Down             focus down
bindsym $mod+Up               focus up
bindsym $mod+Right            focus right

# Parent / child
bindsym $mod+a                focus parent
bindsym $mod+c                focus child

# Jump to urgent window
bindsym $mod+x                [urgent=latest] focus

# Change focus between tiling / floating windows
bindsym $mod+space            focus mode_toggle



####################
#################### Workspaces
####################


#####
##### Switch workspaces
#####

# Switch to workspace and load scratchpad window unfocused (Useful for playing videos!)
bindsym $mod+1                exec "i3-msg workspace  1; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+2                exec "i3-msg workspace  2; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+3                exec "i3-msg workspace  3; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+4                exec "i3-msg workspace  4; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+5                exec "i3-msg workspace  5; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+6                exec "i3-msg workspace  6; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+7                exec "i3-msg workspace  7; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+8                exec "i3-msg workspace  8; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+9                exec "i3-msg workspace  9; i3-msg scratchpad show; i3-msg focus mode_toggle"
bindsym $mod+0                exec "i3-msg workspace 10; i3-msg scratchpad show; i3-msg focus mode_toggle"


#####
##### Move workspaces
#####

# Move workspace to output
bindsym $mod+Shift+$alt+Left  move workspace to output left
bindsym $mod+Shift+$alt+Down  move workspace to output down
bindsym $mod+Shift+$alt+Up    move workspace to output up
bindsym $mod+Shift+$alt+Right move workspace to output right



####################
#################### Containers
####################


#####
##### Container layouts
#####

bindsym $mod+r                mode "resize"

# Split pane horizontally/vertically
bindsym $mod+h                split h
bindsym $mod+v                split v

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+s                layout stacking
bindsym $mod+w                layout tabbed
bindsym $mod+e                layout toggle split


#####
##### Move containers
#####

# vim keys
bindsym $mod+Shift+j          move left
bindsym $mod+Shift+k          move down
bindsym $mod+Shift+l          move up
bindsym $mod+Shift+semicolon  move right

# Arrow keys
bindsym $mod+Shift+Left       move left
bindsym $mod+Shift+Down       move down
bindsym $mod+Shift+Up         move up
bindsym $mod+Shift+Right      move right

# Move container to workspace
bindsym $mod+Shift+1          move container to workspace  1; workspace  1
bindsym $mod+Shift+2          move container to workspace  2; workspace  2
bindsym $mod+Shift+3          move container to workspace  3; workspace  3
bindsym $mod+Shift+4          move container to workspace  4; workspace  4
bindsym $mod+Shift+5          move container to workspace  5; workspace  5
bindsym $mod+Shift+6          move container to workspace  6; workspace  6
bindsym $mod+Shift+7          move container to workspace  7; workspace  7
bindsym $mod+Shift+8          move container to workspace  8; workspace  8
bindsym $mod+Shift+9          move container to workspace  9; workspace  9
bindsym $mod+Shift+0          move container to workspace 10; workspace 10

# Move container to output
bindsym $mod+$alt+Left        move container to output left;  focus output left
bindsym $mod+$alt+Down        move container to output down;  focus output down
bindsym $mod+$alt+Up          move container to output up;    focus output up
bindsym $mod+$alt+Right       move container to output right; focus output right


#####
##### Mic containers
#####

# Kill focused container
bindsym $mod+Shift+q          kill

# Enter fullscreen mode for the focused container
bindsym $mod+f                fullscreen

# Border toggle
bindsym $mod+b                border toggle

# Move container to scratchpad
bindsym $mod+Shift+minus      move scratchpad

# Toggle scratchpad
bindsym $mod+minus            scratchpad show

# Toggle tiling / floating
bindsym $mod+Shift+space      floating toggle



####################
#################### Modes
####################


#####
##### Resize the current window
#####

mode "resize" {
    # vim keys
    bindsym j                 resize shrink width  10 px or 10 ppt
    bindsym k                 resize grow   height 10 px or 10 ppt
    bindsym l                 resize shrink height 10 px or 10 ppt
    bindsym semicolon         resize grow   width  10 px or 10 ppt
    bindsym Shift+j           resize shrink width   5 px or  5 ppt
    bindsym Shift+k           resize grow   height  5 px or  5 ppt
    bindsym Shift+l           resize shrink height  5 px or  5 ppt
    bindsym Shift+semicolon   resize grow   width   5 px or  5 ppt

    # Arrow keys
    bindsym Left              resize shrink width  10 px or 10 ppt
    bindsym Down              resize grow   height 10 px or 10 ppt
    bindsym Up                resize shrink height 10 px or 10 ppt
    bindsym Right             resize grow   width  10 px or 10 ppt
    bindsym Shift+Left        resize shrink width   5 px or  5 ppt
    bindsym Shift+Down        resize grow   height  5 px or  5 ppt
    bindsym Shift+Up          resize shrink height  5 px or  5 ppt
    bindsym Shift+Right       resize grow   width   5 px or  5 ppt

    # Exit mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}


#####
##### System bar (lock/logout/power)
#####

set $system_functions System (l) lock, (e) logout, (s) suspend, (r) reboot, (Shift+s) shutdown
mode "$system_functions" {
    bindsym l       exec --no-startup-id i3exit lock,      mode "default"
    bindsym e       exec --no-startup-id i3exit logout,    mode "default"
    bindsym s       exec --no-startup-id i3exit suspend,   mode "default"
    #bindsym h       exec --no-startup-id i3exit hibernate, mode "default"
    bindsym r       exec --no-startup-id i3exit reboot,    mode "default"
    bindsym Shift+s exec --no-startup-id i3exit shutdown,  mode "default"

    # Exit mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}



####################
#################### App shortcuts
####################

# Terminal
bindsym $mod+Return           exec i3-sensible-terminal



####################
#################### Rules
####################

# Firefox / Pushbullet popups
# Move to primary output
#for_window [class="Firefox" window_role="alert"] floating enable



####################
#################### Startup apps
####################

# Start gnome-settings-daemon for volume control and other media keys.
exec --no-startup-id gnome-settings-daemon

# Auto screen lock
exec --no-startup-id "xautolock -time 15 -locker 'i3exit lock' &"

# Comtpon composite manager to fix screen tearing
exec --no-startup-id "compton -CGb --config ~/.config/compton.conf"

# Autostart programs using dex (https://github.com/jceb/dex)
exec --no-startup-id "dex -ae i3"
